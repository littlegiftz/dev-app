"use strict";(self.webpackChunklocal_dev_app=self.webpackChunklocal_dev_app||[]).push([[593],{593:(g,c,s)=>{s.r(c),s.d(c,{PermissionModule:()=>p});var m=s(808),a=s(879),e=s(223);const d=["video"],l=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){this.init()}ngAfterViewInit(){}init(){navigator.permissions.query({name:"geolocation"}).then(i=>{this.processLocation(i.state),i.onchange=()=>{this.processLocation(i.state)}}),navigator.permissions.query({name:"camera"}).then(i=>{this.processVideo(i.state),i.onchange=()=>{this.processVideo(i.state)}})}processLocation(o){console.log(`geo: ${o}`),this.geoPermission=o,this.currentLat=null,this.currentLong=null,("granted"==o||"prompt"==o)&&navigator.geolocation.getCurrentPosition(i=>{console.log(i),this.position=i,this.currentLat=i.coords.latitude,this.currentLong=i.coords.longitude})}processVideo(o){console.log(`media: ${o}`),this.mediaPermission=o,this.vid&&("granted"==o||"prompt"==o)&&navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}}).then(i=>{this.vid.nativeElement.srcObject=i})}closeWebView(){window.location.href="//itax//?event=close"}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-permission"]],viewQuery:function(o,i){if(1&o&&e.Gf(d,5),2&o){let r;e.iGM(r=e.CRH())&&(i.vid=r.first)}},decls:21,vars:4,consts:[[1,"wrapper"],[1,"nav-bar","mb-40"],[3,"click"],[1,"mb-20"],["autoplay","","playsinline","","muted","",1,"video-frame"],["video",""]],template:function(o,i){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){return i.closeWebView()}),e._uU(3,"close"),e.qZA()(),e.TgZ(4,"div")(5,"div",3),e._uU(6),e.qZA(),e.TgZ(7,"div",3)(8,"div"),e._uU(9),e.qZA(),e.TgZ(10,"div"),e._uU(11),e.qZA()()(),e._UZ(12,"hr"),e.TgZ(13,"div")(14,"div",3),e._uU(15),e.qZA(),e._UZ(16,"video",4,5),e.qZA(),e._UZ(18,"hr"),e.TgZ(19,"button",2),e.NdJ("click",function(){return i.init()}),e._uU(20,"re-init"),e.qZA()()),2&o&&(e.xp6(6),e.hij(" Test Geolocation: Permission ",i.geoPermission||"-"," "),e.xp6(3),e.hij("Latitude: ",i.currentLat,""),e.xp6(2),e.hij("Longitude: ",i.currentLong,""),e.xp6(4),e.hij(" Test Camera: Permission ",i.mediaPermission||"-"," "))},styles:[".wrapper[_ngcontent-%COMP%]{padding:80px 30px}.mb-20[_ngcontent-%COMP%]{margin-bottom:20px}.mb-40[_ngcontent-%COMP%]{margin-bottom:40px}.text-red[_ngcontent-%COMP%]{color:red}.video-frame[_ngcontent-%COMP%]{width:150px;height:150px;border:1px solid #999}hr[_ngcontent-%COMP%]{margin:40px 0}"]}),n})()}];let u=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[a.Bz.forChild(l)],a.Bz]}),n})(),p=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[m.ez,u]]}),n})()}}]);